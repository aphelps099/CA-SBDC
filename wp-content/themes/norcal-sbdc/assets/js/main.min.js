function getQueryStringValue(e){return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+escape(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}function setCookie(e,t,n,a){a=void 0!==a?a:"/";var i,o="";n&&((i=new Date).setTime(i.getTime()+24*n*60*60*1e3),o="; expires="+i.toUTCString()),document.cookie=e+"="+(t||"")+o+"; path="+a}function getCookie(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var i=n[a];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}function padNumber(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n}!function(c){var r,a=0,l=null;c(document).ready(function(){c.wptheme.initSiteAnnouncement(),c.wptheme.initHeader(),c.wptheme.initMobileMenu(),c.wptheme.initGalleries(),c.wptheme.initSliders(),c.wptheme.initModals(),c.wptheme.initOdometers(),c.wptheme.initSocialSharingLinks(),c.wptheme.initContainerBlocks(),c.wptheme.initTabbedContentBlocks(),c.wptheme.initTestimonialSliderBlocks(),c.wptheme.initContentSliderBlocks(),c.wptheme.initFeaturedPostSliderBlocks(),c.wptheme.initFeaturedResourceSliderBlocks(),c.wptheme.initCenterFinderBlocks(),c.wptheme.initSectionNavBlocks(),c.wptheme.initBranchMapShortcodes()}),c(window).load(function(){}),c.wptheme=((r={}).initMapSettings=function(){l||"undefined"!=typeof google&&((l={markerShapes:{default:{coords:[15,0,26,4,30,15,26,19,15,37,4,19,0,15,4,4],type:"poly"}},markerImages:{darkBlue:{url:crownThemeData.themeUrl+"/assets/img/icons/map-markers.png",size:new google.maps.Size(30,37),scaledSize:new google.maps.Size(150,37),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(15,37)}}}).markerImages.blue=c.extend(!0,{},l.markerImages.darkBlue,{origin:new google.maps.Point(30,0)}),l.markerImages.red=c.extend(!0,{},l.markerImages.darkBlue,{origin:new google.maps.Point(60,0)}),l.markerImages.gray=c.extend(!0,{},l.markerImages.darkBlue,{origin:new google.maps.Point(90,0)}),l.markerImages.white=c.extend(!0,{},l.markerImages.darkBlue,{origin:new google.maps.Point(120,0)}))},r.initSiteAnnouncement=function(){c(document).on("click","#site-announcement button.dismiss",function(e){var t=c("#site-announcement");t.removeClass("shown"),setTimeout(function(){t.addClass("active")},500),setCookie("site_announcement_"+t.data("announcement-id"),"dismissed",365)});function e(){var e,t=c("#site-announcement");t.length&&t.hasClass("active")&&(e=t.outerHeight(),t.css({marginTop:-e}))}var t=c("#site-announcement");t.length&&"dismissed"!=getCookie("site_announcement_"+t.data("announcement-id"))&&(t.addClass("active"),setTimeout(function(){t.addClass("shown")},500),e(),c(window).on("load resize",e))},r.initHeader=function(){var e=c("#header");c("#main-content").children().first().is(".wp-block-crown-blocks-container.text-color-light.alignfull")&&e.addClass("text-color-light"),e.addClass("loaded");e=function(){var a=c("body").width();c("#header-primary-navigation .sub-menu:not(.mega-sub-menu)").each(function(e,t){var n=c(t),t=n.parent().closest(".sub-menu").length;n.css({marginLeft:0}),t&&n.removeClass("drop-left"),n.offset().left+n.outerWidth()>a-10&&(t?n.addClass("drop-left"):n.css({marginLeft:a-(n.offset().left+n.outerWidth())-10+"px"}))})};e(),c(window).on("load",e),c(window).on("resize",e),c("#header-primary-navigation a").on("click",function(e){var t=c(this).closest(".menu-item"),n=c("> .sub-menu",t);c("#header-primary-navigation .menu-item.active").not(c(this).parents(".menu-item.active")).removeClass("active"),n.length&&!t.hasClass("active")&&(e.preventDefault(),t.addClass("active"))}),c(document).on("click",function(e){c(e.target).closest("#header-primary-navigation-menu").length||c("#header-primary-navigation .menu-item.active").removeClass("active")});e=function(){var e=c("#header"),t=c(window).scrollTop(),n=0;c("body").width()<601&&c("#wpadminbar").length&&(n+=c("#wpadminbar").outerHeight()),c("#site-announcement.active.shown").length&&(n+=c("#site-announcement.active.shown").outerHeight()),n<t&&!e.hasClass("is-sticky")?e.addClass("is-sticky"):t<=n&&e.hasClass("is-sticky")&&e.removeClass("is-sticky"),a<t&&n+300<t&&!c("#header-primary-navigation-menu > .menu-item.active").length&&!e.hasClass("is-minified")?e.addClass("is-minified"):t<=a&&e.hasClass("is-minified")&&e.removeClass("is-minified"),a=t};e(),c(window).on("load scroll",e)},r.initMobileMenu=function(){c(document).on("click","#mobile-menu-toggle",function(e){var t=c("body");t.is(".mobile-menu-active")?c(document).trigger("close-mobile-menu"):t.addClass("mobile-menu-active")}),c(document).on("touchstart","body.mobile-menu-active #page",function(e){c(e.target).closest("#mobile-menu-toggle").length||c(document).trigger("close-mobile-menu")}),c(document).on("close-mobile-menu",function(){c("body").removeClass("mobile-menu-active")}),c("#mobile-menu-primary-navigation .menu-item").each(function(e,t){var n=c(this);c("> .sub-menu",n).length&&(n.addClass("menu-item-has-sub-menu"),n.append('<button type="button" class="toggle">Toggle</button>'))}),c("#mobile-menu-primary-navigation").on("click","button.toggle",function(e){var t,n,a=c(this).closest(".menu-item"),i=c("> .sub-menu",a);a.hasClass("active")?(a.removeClass("active"),t=i.outerHeight(),n=0,i.css({height:t}),setTimeout(function(){i.css({height:n})},10)):(a.addClass("active"),t=i.outerHeight(),i.css({height:"auto"}),n=i.outerHeight(),i.css({height:t}),setTimeout(function(){i.css({height:n})},10),setTimeout(function(){i.css({height:"auto"})},210))}),c("#mobile-menu-primary-navigation .menu-item-has-sub-menu.current-menu-item, #mobile-menu-primary-navigation .menu-item-has-sub-menu.current-menu-ancestor").each(function(e,t){c("> .toggle",t).trigger("click")})},r.initGalleries=function(){},r.initSliders=function(){},r.initModals=function(){c(document).on("click","a",function(e){var t;c(this).attr("href")&&(matches=c(this).attr("href").match(/^#case-study-modal-(\d+)$/))&&(e.preventDefault(),(t=c(c(this).attr("href")+".modal")).length?t.modal():(e=parseInt(matches[1]),(t=c('<div class="modal fade case-study"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-body"></div></div></div></div>')).attr("id","case-study-modal-"+e),t.addClass("loading"),c(".modal-content",t).prepend('<div class="modal-header"><button type="button" class="close" data-dismiss="modal"><span>&times;</span></button></div>'),c(".modal-body",t).html('<div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div>'),c("body").append(t),t.modal(),c.get(crownThemeData.ajaxUrl,{action:"the_case_study",id:e},function(e){var t=c("#case-study-modal-"+e.id);t.length&&(t.removeClass("loading"),c(".modal-body",t).html(e.html),c("article.has-photos",t).length&&t.addClass("has-photos"),setTimeout(function(){var e;c("article.has-multiple-photos",t).length&&((e=c(".entry-photos .slider",t)).hasClass("slick-initialized")||e.slick({mobileFirst:!0,draggable:!1,dots:!1,arrows:!0,fade:!1,autoplay:!1}))},500),setTimeout(function(){c(window).trigger("resize")},1e3))},"json")))}),c(document).on("click","a",function(e){var t;c(this).attr("href")&&(matches=c(this).attr("href").match(/^#team-member-modal-(\d+)$/))&&(e.preventDefault(),(t=c(c(this).attr("href")+".modal")).length?t.modal():(e=parseInt(matches[1]),(t=c('<div class="modal fade team-member"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-body"></div></div></div></div>')).attr("id","team-member-modal-"+e),t.addClass("loading"),c(".modal-content",t).prepend('<div class="modal-header"><button type="button" class="close" data-dismiss="modal"><span>&times;</span></button></div>'),c(".modal-body",t).html('<div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div>'),c("body").append(t),t.modal(),c.get(crownThemeData.ajaxUrl,{action:"the_team_member",id:e},function(e){var t=c("#team-member-modal-"+e.id);t.length&&(t.removeClass("loading"),c(".modal-body",t).html(e.html))},"json")))})},r.initOdometers=function(){c(".odometer-statistic").each(function(e,t){var n,a,i=c(".stat-value",t);c(t).addClass("fade-in"),i.length&&(matches=i.text().match(/([^\d]*)([\d\.,]+)(.*)/))&&(i.data("odometer-final-value",matches[2]),n=c('<span class="pre">'+matches[1]+"</span>"),a=c('<span class="odometer">'+matches[2]+"</span>"),t=c('<span class="post">'+matches[3]+"</span>"),i.html(""),i.append(n).append(a).append(t),new Odometer({el:a[0],value:"0".padStart(5,0)}))});function e(){var a=c(window).scrollTop(),i=c(window).height();c(".odometer-statistic.fade-in:not(.animated)").each(function(e,t){var n=c(".stat-value",t);n.offset().top<=a+.9*i&&(c(t).addClass("animated"),c(".odometer",n).text(n.data("odometer-final-value")))})}e(),c(window).on("load scroll",e)},r.initSocialSharingLinks=function(){c(document).on("click",".social-sharing-links a",function(e){var t,n,a=c(this).parent();a.parent();a.hasClass("print")?(e.preventDefault(),window.print()):a.is(".facebook, .twitter, .linkedin, .google-plus, .pinterest, .houzz")&&(e.preventDefault(),t=600,n=400,a.hasClass("google-plus")&&(t=512),a.hasClass("pinterest")&&(t=750),a.hasClass("houzz")&&(t=800,n=460),e=screen.height/2-n/2-.1*screen.height,a=screen.width/2-t/2,window.open(c(this).attr("href"),"Share Link","top="+e+",left="+a+",toolbar=0,status=0,width="+t+",height="+n))})},r.initMap=function(e){r.initMapSettings(),"undefined"!=typeof google&&e.on("mapInitialized",function(e){var t=c(this).data("map-data");if(t.settings.points.length&&!t.markers.length){var n,a=null;for(n in"undefined"!=typeof InfoBox&&(a=new InfoBox({pixelOffset:new google.maps.Size(-120,-50),alignBottom:!0,closeBoxURL:""}),google.maps.event.addListener(t.map,"click",function(){a.close()})),t.bounds=new google.maps.LatLngBounds,t.settings.points){var i=t.settings.points[n],o=new google.maps.LatLng(i.lat,i.lng),s={markerIndex:parseInt(n),position:o,map:t.map,icon:l.markerImages.red,shape:l.markerShapes.default,title:i.title,data:i},i=new google.maps.Marker(s);a&&s.data.infoBoxContent&&google.maps.event.addListener(i,"click",function(){a.setOptions({boxClass:"infoBox"}),a.setContent(this.data.infoBoxContent),a.open(this.map,this),setTimeout(function(){a.setOptions({boxClass:"infoBox active"})},100)}),c(t.map.getDiv()).closest(".wp-block-crown-blocks-center-finder").length&&google.maps.event.addListener(i,"click",function(){var e=c(this.map.getDiv()).closest(".wp-block-crown-blocks-center-finder"),t=c('.locations article.location[data-location-id="'+this.data.locationId+'"]',e);t.length&&(t.trigger("click"),c(".locations",e).stop(!0).animate({scrollTop:t.offset().top-t.parent().offset().top},1e3,"easeOutExpo"))}),t.markers.push(i),t.bounds.extend(o)}t.settings.points.length&&(t.map.fitBounds(t.bounds),google.maps.event.addListenerOnce(t.map,"idle",function(){var e=c(this.getDiv()).data("map-data");e.map.getZoom()>e.settings.options.zoom&&e.map.setZoom(e.settings.options.zoom)}))}})},r.initContainerBlocks=function(){function e(){var n=c("body").width();c(".wp-block-crown-blocks-container.bg-flush-right").each(function(e,t){t=c(t);c("> .container-bg",t).css({right:Math.min(0,t.offset().left+t.outerWidth()-n)})}),c(".wp-block-crown-blocks-container.bg-flush-left").each(function(e,t){t=c(t);c("> .container-bg",t).css({left:Math.min(0,-t.offset().left)})})}e(),c(window).on("load resize",e)},r.initExpandableContentBlocks=function(){c(document).on("click",".wp-block-crown-blocks-expandable-content .expandable-content-toggle button",function(){var e=c(this).closest(".wp-block-crown-blocks-expandable-content"),t=c("> .inner > .expandable-content-contents",e);e.css({minHeight:e.outerHeight()}),e.addClass("expanded"),t.css({height:c("> .inner",t).outerHeight()}),setTimeout(function(){t.css({height:"auto"})},500)})},r.initTabbedContentBlocks=function(){c(".wp-block-crown-blocks-tabbed-content:not(.type-grid)").each(function(e,t){var n,a=c(".tabbed-content-tabs > .inner",t);a.hasClass("slick-initialized")||(n=c('<div class="slick-slider-nav"></div>'),c(".tabbed-content-tabs",t).before(n),a.children().wrap("<div></div>"),n={mobileFirst:!0,draggable:!1,dots:!0,arrows:!1,fade:!0,appendDots:n,adaptiveHeight:!0,customPaging:function(e,t){var n=c("> .wp-block-crown-blocks-tabbed-content-tab > .inner > .tab-title",e.$slides[t]),e=n?n.text():"",n=c('<button type="button"></button');return n.append('<span class="index">'+padNumber(t+1,2)+"<span>"),""!=e&&n.append(' <span class="label">'+e+"<span>"),n.append(' <span class="indicator"><span></span></span>'),n}},a.slick(n))}),c(".wp-block-crown-blocks-tabbed-content.type-grid").each(function(e,t){var t=c(t),i=c('<nav class="tabbed-content-nav"><ul class="menu"></ul></nav>');c("> .inner",t).prepend(i),c("> .inner > .tabbed-content-tabs > .inner > .wp-block-crown-blocks-tabbed-content-tab",t).each(function(e,t){var n=c(t),a=c("> .inner > .tab-title",n).length?c("> .inner > .tab-title",n).text():"",t=c('<button type="button"><span class="inner"></span></button>');t.data("tab-index",e),n.data("tab-index",e),c("> .inner",t).append('<span class="index">'+padNumber(e+1,2)+"<span>"),""!=a&&c("> .inner",t).append(' <span class="label">'+a+"<span>"),c("> .inner",t).append(' <span class="indicator"><span></span></span>'),c(".menu",i).append(t),t.wrap('<li class="menu-item"></li>')})}),c(document).on("click",".wp-block-crown-blocks-tabbed-content.type-grid > .inner > .tabbed-content-nav button",function(e){var t=c(this).closest(".wp-block-crown-blocks-tabbed-content"),a=c(this).closest(".menu-item"),n=c(this).closest(".menu"),i=c(this).data("tab-index");if(a.hasClass("active"))a.removeClass("active"),c(".drawer",n).each(function(e,t){var n=c(t);c("> .inner",n).css({height:n.height()}),n.removeClass("active"),setTimeout(function(){c("> .inner",n).css({height:0})},100),setTimeout(function(){n.remove()},600)});else{c(".menu-item.active",n).removeClass("active"),a.addClass("active");for(var o=c("> .inner > .tabbed-content-tabs > .inner > .wp-block-crown-blocks-tabbed-content-tab",t).eq(i).clone(),s=a;s.nextAll(".menu-item").length&&s.nextAll(".menu-item").first().offset().top==a.offset().top;)s=s.nextAll(".menu-item").first();var l=s.next(".drawer");l.length||(l=c('<li class="drawer"><div class="inner"></div></li>'),s.after(l),l.closest(".text-color-light, .text-color-dark").hasClass("text-color-light")?l.addClass("text-color-dark"):l.addClass("text-color-light")),c(".drawer",n).not(l).each(function(e,t){var n=c(t);n.hide();t=a.offset().top;n.show(),c("> .inner",n).css({height:n.height()}),n.removeClass("active"),setTimeout(function(){c("> .inner",n).css({height:0})},100),setTimeout(function(){n.remove()},500),r.smoothScrollToPos(t)}),c("> .inner",l).css({height:l.hasClass("active")?l.height():0}),c("> .inner",l).html(o),c(" > .inner",o).css({maxWidth:n.parent().width()}),l.addClass("active"),setTimeout(function(){c("> .inner",l).css({height:o.outerHeight()})},100),setTimeout(function(){c("> .inner",l).css({height:"auto"})},600)}}),c(window).on("resize",function(){c(".wp-block-crown-blocks-tabbed-content.type-grid .tabbed-content-nav .drawer").each(function(e,t){var n=c(t),t=n.closest(".menu"),a=c("> .menu-item.active",t);n.hide();for(var i=a;i.nextAll(".menu-item").length&&i.nextAll(".menu-item").first().offset().top==a.offset().top;)i=i.nextAll(".menu-item").first();i.next(".drawer").length&&i.next(".drawer").is(n)||i.after(n),n.show(),c("> .inner > .wp-block-crown-blocks-tabbed-content-tab > .inner").css({maxWidth:t.parent().width()})})})},r.initTestimonialSliderBlocks=function(){c(".wp-block-crown-blocks-testimonial-slider").each(function(e,t){var n,a=c(".testimonial-slider-testimonials > .inner",t);a.hasClass("slick-initialized")||(n=c('<div class="slick-slider-nav"></div>'),c(".testimonial-slider-testimonials",t).before(n),a.children().wrap("<div></div>"),n={mobileFirst:!0,draggable:!1,dots:!1,arrows:!0,fade:!0,appendArrows:n,adaptiveHeight:!0},a.on("init",function(e,t){var n=t.$slider.closest(".wp-block-crown-blocks-testimonial-slider"),n=c(".slick-slider-nav",n);c(".status",n).remove(),1<t.slideCount&&n.append('<span class="status"><span class="current">'+(t.currentSlide+1)+'</span> <span class="of">of</span> <span class="total">'+t.slideCount+"</span></span>")}).on("beforeChange",function(e,t,n,a){var i=t.$slider.closest(".wp-block-crown-blocks-testimonial-slider"),i=c(".slick-slider-nav",i);c(".status",i).remove(),1<t.slideCount&&i.append('<span class="status"><span class="current">'+(a+1)+'</span> <span class="of">of</span> <span class="total">'+t.slideCount+"</span></span>")}).slick(n))})},r.initContentSliderBlocks=function(){c(".wp-block-crown-blocks-content-slider").each(function(e,t){t=c("> .inner",t);t.hasClass("slick-initialized")||t.slick({mobileFirst:!0,draggable:!0,dots:!0,arrows:!1,fade:!1})})},r.initFeaturedPostSliderBlocks=function(){c(".wp-block-crown-blocks-featured-post-slider").each(function(e,t){t=c(".post-feed > .inner",t);t.hasClass("slick-initialized")||t.slick({mobileFirst:!0,draggable:!0,dots:!1,arrows:!0,fade:!1,slidesToShow:1,slidesToScroll:1,responsive:[{breakpoint:767,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:991,settings:{slidesToShow:3,slidesToScroll:3}}]})})},r.initFeaturedResourceSliderBlocks=function(){c(".wp-block-crown-blocks-featured-resource-slider").each(function(e,t){t=c(".post-feed > .inner",t);t.hasClass("slick-initialized")||t.slick({mobileFirst:!0,draggable:!0,dots:!1,arrows:!0,fade:!1,slidesToShow:1,slidesToScroll:1,responsive:[{breakpoint:767,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:991,settings:{slidesToShow:3,slidesToScroll:3}}]})})},r.initCenterFinderBlocks=function(){c(".wp-block-crown-blocks-center-finder").each(function(e,t){t=c(t);r.initMap(c(".google-map",t)),t.on("click",".locations article.location",function(e){var t=c(this);if(!t.hasClass("active")){var n=c(this).closest(".wp-block-crown-blocks-center-finder");c(".locations article.location.active",n).removeClass("active");var a=t.clone();t.addClass("active"),c(".preview",n).html(a);var i=parseInt(t.data("location-id")),t=c(".map .google-map",n);if(t.hasClass("map-initialized")){var o,s=t.data("map-data");for(o in s.markers)s.markers[o].setIcon(l.markerImages.red);n=s.markers.find(function(e){return e.data.locationId==i});void 0!==n&&n.setIcon(l.markerImages.blue)}else t.on("mapInitialized",function(e){var t,n=c(this).data("map-data");for(t in n.markers)n.markers[t].setIcon(l.markerImages.red);var a=n.markers.find(function(e){return e.data.locationId==i});void 0!==a&&a.setIcon(l.markerImages.blue)})}}),c(".locations article.location:first",t).trigger("click")})},r.initSectionNavBlocks=function(){c(".wp-block-crown-blocks-section-nav").each(function(e,t){var t=c(t),n=c('<nav class="section-nav-nav"><div class="inner"><ul class="menu"></ul></div></nav>');c(".section-nav-contents",t).before(n),c(".section-nav-title",t).length&&c("> .inner",n).prepend("<h2>"+c(".section-nav-title",t).text()+"</h2>"),c(".wp-block-crown-blocks-section-nav-content",t).each(function(e,t){t=c(t),e="Section "+(e+1);c(".section-nav-content-title",t).length&&(e=c(".section-nav-content-title",t).text()),c(".menu",n).append('<li><a href="#">'+e+"</a></li>")})}),c(document).on("click",".wp-block-crown-blocks-section-nav .section-nav-nav .menu a",function(e){e.preventDefault();var t=c(this).closest(".wp-block-crown-blocks-section-nav"),e=c(this).parent().index();0==e?r.smoothScrollToElement(t):(e=c(".section-nav-contents > .inner > .wp-block-crown-blocks-section-nav-content",t).eq(e),t=c(".section-nav-nav",t).outerHeight(),r.smoothScrollToElement(e,1e3,-t))})},r.initBranchMapShortcodes=function(){c(".branch-map > .google-map").each(function(e,t){r.initMap(c(t))})},r.smoothScrollToElement=function(e,t,n){var a;t=void 0!==t?t:1e3,n=void 0!==n?n:0,0<e.length&&(a=parseInt(e.css("margin-top")),r.smoothScrollToPos(e.offset().top-(0<a?a:0),t,n))},r.smoothScrollToPos=function(e,t,n){t=void 0!==t?t:1e3,n=void 0!==n?n:0;var a=600<c("body").width()&&c("#wpadminbar").length?c("#wpadminbar").outerHeight():0;c("html, body").stop(!0).animate({scrollTop:e-a+n},t,"easeOutExpo")},r)}(jQuery);