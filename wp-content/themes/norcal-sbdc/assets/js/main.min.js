function getQueryStringValue(e){return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+escape(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}function setCookie(e,t,n,a){a=void 0!==a?a:"/";var i,o="";n&&((i=new Date).setTime(i.getTime()+24*n*60*60*1e3),o="; expires="+i.toUTCString()),document.cookie=e+"="+(t||"")+o+"; path="+a}function getCookie(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var i=n[a];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}function padNumber(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n}!function(l){var i,a=0,c=null;l(document).ready(function(){l.wptheme.initSiteAnnouncement(),l.wptheme.initHeader(),l.wptheme.initMobileMenu(),l.wptheme.initGalleries(),l.wptheme.initSliders(),l.wptheme.initModals(),l.wptheme.initOdometers(),l.wptheme.initSocialSharingLinks(),l.wptheme.initTabbedContentBlocks(),l.wptheme.initTestimonialSliderBlocks(),l.wptheme.initContentSliderBlocks(),l.wptheme.initFeaturedPostSliderBlocks(),l.wptheme.initFeaturedResourceSliderBlocks(),l.wptheme.initCenterFinderBlocks(),l.wptheme.initSectionNavBlocks(),l.wptheme.initBranchMapShortcodes()}),l(window).load(function(){}),l.wptheme=((i={}).initMapSettings=function(){c||"undefined"!=typeof google&&((c={markerShapes:{default:{coords:[15,0,26,4,30,15,26,19,15,37,4,19,0,15,4,4],type:"poly"}},markerImages:{darkBlue:{url:crownThemeData.themeUrl+"/assets/img/icons/map-markers.png",size:new google.maps.Size(30,37),scaledSize:new google.maps.Size(150,37),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(15,37)}}}).markerImages.blue=l.extend(!0,{},c.markerImages.darkBlue,{origin:new google.maps.Point(30,0)}),c.markerImages.red=l.extend(!0,{},c.markerImages.darkBlue,{origin:new google.maps.Point(60,0)}),c.markerImages.gray=l.extend(!0,{},c.markerImages.darkBlue,{origin:new google.maps.Point(90,0)}),c.markerImages.white=l.extend(!0,{},c.markerImages.darkBlue,{origin:new google.maps.Point(120,0)}))},i.initSiteAnnouncement=function(){l(document).on("click","#site-announcement button.dismiss",function(e){var t=l("#site-announcement");t.removeClass("shown"),setTimeout(function(){t.addClass("active")},500),setCookie("site_announcement_"+t.data("announcement-id"),"dismissed",365)});function e(){var e,t=l("#site-announcement");t.length&&t.hasClass("active")&&(e=t.outerHeight(),t.css({marginTop:-e}))}var t=l("#site-announcement");t.length&&"dismissed"!=getCookie("site_announcement_"+t.data("announcement-id"))&&(t.addClass("active"),setTimeout(function(){t.addClass("shown")},500),e(),l(window).on("load resize",e))},i.initHeader=function(){var e=l("#header");l("#main-content").children().first().is(".wp-block-crown-blocks-container.text-color-light.alignfull")&&e.addClass("text-color-light"),e.addClass("loaded");e=function(){var a=l("body").width();l("#header-primary-navigation .sub-menu:not(.mega-sub-menu)").each(function(e,t){var n=l(t),t=n.parent().closest(".sub-menu").length;n.css({marginLeft:0}),t&&n.removeClass("drop-left"),n.offset().left+n.outerWidth()>a-10&&(t?n.addClass("drop-left"):n.css({marginLeft:a-(n.offset().left+n.outerWidth())-10+"px"}))})};e(),l(window).on("load",e),l(window).on("resize",e),l("#header-primary-navigation a").on("click",function(e){var t=l(this).closest(".menu-item"),n=l("> .sub-menu",t);l("#header-primary-navigation .menu-item.active").not(l(this).parents(".menu-item.active")).removeClass("active"),n.length&&!t.hasClass("active")&&(e.preventDefault(),t.addClass("active"))}),l(document).on("click",function(e){l(e.target).closest("#header-primary-navigation-menu").length||l("#header-primary-navigation .menu-item.active").removeClass("active")});e=function(){var e=l("#header"),t=l(window).scrollTop(),n=0;l("body").width()<601&&l("#wpadminbar").length&&(n+=l("#wpadminbar").outerHeight()),l("#site-announcement.active.shown").length&&(n+=l("#site-announcement.active.shown").outerHeight()),n<t&&!e.hasClass("is-sticky")?e.addClass("is-sticky"):t<=n&&e.hasClass("is-sticky")&&e.removeClass("is-sticky"),a<t&&n+300<t&&!l("#header-primary-navigation-menu > .menu-item.active").length&&!e.hasClass("is-minified")?e.addClass("is-minified"):t<=a&&e.hasClass("is-minified")&&e.removeClass("is-minified"),a=t};e(),l(window).on("load scroll",e)},i.initMobileMenu=function(){l(document).on("click","#mobile-menu-toggle",function(e){var t=l("body");t.is(".mobile-menu-active")?l(document).trigger("close-mobile-menu"):t.addClass("mobile-menu-active")}),l(document).on("touchstart","body.mobile-menu-active #page",function(e){l(e.target).closest("#mobile-menu-toggle").length||l(document).trigger("close-mobile-menu")}),l(document).on("close-mobile-menu",function(){l("body").removeClass("mobile-menu-active")}),l("#mobile-menu-primary-navigation .menu-item").each(function(e,t){var n=l(this);l("> .sub-menu",n).length&&(n.addClass("menu-item-has-sub-menu"),n.append('<button type="button" class="toggle">Toggle</button>'))}),l("#mobile-menu-primary-navigation").on("click","button.toggle",function(e){var t,n,a=l(this).closest(".menu-item"),i=l("> .sub-menu",a);a.hasClass("active")?(a.removeClass("active"),t=i.outerHeight(),n=0,i.css({height:t}),setTimeout(function(){i.css({height:n})},10)):(a.addClass("active"),t=i.outerHeight(),i.css({height:"auto"}),n=i.outerHeight(),i.css({height:t}),setTimeout(function(){i.css({height:n})},10),setTimeout(function(){i.css({height:"auto"})},210))}),l("#mobile-menu-primary-navigation .menu-item-has-sub-menu.current-menu-item, #mobile-menu-primary-navigation .menu-item-has-sub-menu.current-menu-ancestor").each(function(e,t){l("> .toggle",t).trigger("click")})},i.initGalleries=function(){},i.initSliders=function(){},i.initModals=function(){l(document).on("click","a",function(e){var t;l(this).attr("href")&&(matches=l(this).attr("href").match(/^#case-study-modal-(\d+)$/))&&(e.preventDefault(),(t=l(l(this).attr("href")+".modal")).length?t.modal():(e=parseInt(matches[1]),(t=l('<div class="modal fade case-study"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-body"></div></div></div></div>')).attr("id","case-study-modal-"+e),t.addClass("loading"),l(".modal-content",t).prepend('<div class="modal-header"><button type="button" class="close" data-dismiss="modal"><span>&times;</span></button></div>'),l(".modal-body",t).html('<div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div>'),l("body").append(t),t.modal(),l.get(crownThemeData.ajaxUrl,{action:"the_case_study",id:e},function(e){var t=l("#case-study-modal-"+e.id);t.length&&(t.removeClass("loading"),l(".modal-body",t).html(e.html),l("article.has-photos",t).length&&t.addClass("has-photos"),setTimeout(function(){var e;l("article.has-multiple-photos",t).length&&((e=l(".entry-photos .slider",t)).hasClass("slick-initialized")||e.slick({mobileFirst:!0,draggable:!1,dots:!1,arrows:!0,fade:!1,autoplay:!1}))},500),setTimeout(function(){l(window).trigger("resize")},1e3))},"json")))}),l(document).on("click","a",function(e){var t;l(this).attr("href")&&(matches=l(this).attr("href").match(/^#team-member-modal-(\d+)$/))&&(e.preventDefault(),(t=l(l(this).attr("href")+".modal")).length?t.modal():(e=parseInt(matches[1]),(t=l('<div class="modal fade team-member"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-body"></div></div></div></div>')).attr("id","team-member-modal-"+e),t.addClass("loading"),l(".modal-content",t).prepend('<div class="modal-header"><button type="button" class="close" data-dismiss="modal"><span>&times;</span></button></div>'),l(".modal-body",t).html('<div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div>'),l("body").append(t),t.modal(),l.get(crownThemeData.ajaxUrl,{action:"the_team_member",id:e},function(e){var t=l("#team-member-modal-"+e.id);t.length&&(t.removeClass("loading"),l(".modal-body",t).html(e.html))},"json")))})},i.initOdometers=function(){l(".odometer-statistic").each(function(e,t){var n,a,i=l(".stat-value",t);l(t).addClass("fade-in"),i.length&&(matches=i.text().match(/([^\d]*)([\d\.,]+)(.*)/))&&(i.data("odometer-final-value",matches[2]),n=l('<span class="pre">'+matches[1]+"</span>"),a=l('<span class="odometer">'+matches[2]+"</span>"),t=l('<span class="post">'+matches[3]+"</span>"),i.html(""),i.append(n).append(a).append(t),new Odometer({el:a[0],value:"0".padStart(5,0)}))});function e(){var a=l(window).scrollTop(),i=l(window).height();l(".odometer-statistic.fade-in:not(.animated)").each(function(e,t){var n=l(".stat-value",t);n.offset().top<=a+.9*i&&(l(t).addClass("animated"),l(".odometer",n).text(n.data("odometer-final-value")))})}e(),l(window).on("load scroll",e)},i.initSocialSharingLinks=function(){l(document).on("click",".social-sharing-links a",function(e){var t,n,a=l(this).parent();a.parent();a.hasClass("print")?(e.preventDefault(),window.print()):a.is(".facebook, .twitter, .linkedin, .google-plus, .pinterest, .houzz")&&(e.preventDefault(),t=600,n=400,a.hasClass("google-plus")&&(t=512),a.hasClass("pinterest")&&(t=750),a.hasClass("houzz")&&(t=800,n=460),e=screen.height/2-n/2-.1*screen.height,a=screen.width/2-t/2,window.open(l(this).attr("href"),"Share Link","top="+e+",left="+a+",toolbar=0,status=0,width="+t+",height="+n))})},i.initMap=function(e){i.initMapSettings(),"undefined"!=typeof google&&e.on("mapInitialized",function(e){var t=l(this).data("map-data");if(t.settings.points.length&&!t.markers.length){var n,a=null;for(n in"undefined"!=typeof InfoBox&&(a=new InfoBox({pixelOffset:new google.maps.Size(-120,-50),alignBottom:!0,closeBoxURL:""}),google.maps.event.addListener(t.map,"click",function(){a.close()})),t.bounds=new google.maps.LatLngBounds,t.settings.points){var i=t.settings.points[n],o=new google.maps.LatLng(i.lat,i.lng),s={markerIndex:parseInt(n),position:o,map:t.map,icon:c.markerImages.red,shape:c.markerShapes.default,title:i.title,data:i},i=new google.maps.Marker(s);a&&s.data.infoBoxContent&&google.maps.event.addListener(i,"click",function(){a.setOptions({boxClass:"infoBox"}),a.setContent(this.data.infoBoxContent),a.open(this.map,this),setTimeout(function(){a.setOptions({boxClass:"infoBox active"})},100)}),l(t.map.getDiv()).closest(".wp-block-crown-blocks-center-finder").length&&google.maps.event.addListener(i,"click",function(){var e=l(this.map.getDiv()).closest(".wp-block-crown-blocks-center-finder"),t=l('.locations article.location[data-location-id="'+this.data.locationId+'"]',e);t.length&&(t.trigger("click"),l(".locations",e).stop(!0).animate({scrollTop:t.offset().top-t.parent().offset().top},1e3,"easeOutExpo"))}),t.markers.push(i),t.bounds.extend(o)}t.settings.points.length&&(t.map.fitBounds(t.bounds),google.maps.event.addListenerOnce(t.map,"idle",function(){var e=l(this.getDiv()).data("map-data");e.map.getZoom()>e.settings.options.zoom&&e.map.setZoom(e.settings.options.zoom)}))}})},i.initExpandableContentBlocks=function(){l(document).on("click",".wp-block-crown-blocks-expandable-content .expandable-content-toggle button",function(){var e=l(this).closest(".wp-block-crown-blocks-expandable-content"),t=l("> .inner > .expandable-content-contents",e);e.css({minHeight:e.outerHeight()}),e.addClass("expanded"),t.css({height:l("> .inner",t).outerHeight()}),setTimeout(function(){t.css({height:"auto"})},500)})},i.initTabbedContentBlocks=function(){l(".wp-block-crown-blocks-tabbed-content").each(function(e,t){var n,a=l(".tabbed-content-tabs > .inner",t);a.hasClass("slick-initialized")||(n=l('<div class="slick-slider-nav"></div>'),l(".tabbed-content-tabs",t).before(n),a.children().wrap("<div></div>"),n={mobileFirst:!0,draggable:!1,dots:!0,arrows:!1,fade:!0,appendDots:n,adaptiveHeight:!0,customPaging:function(e,t){var n=l("> .wp-block-crown-blocks-tabbed-content-tab > .inner > .tab-title",e.$slides[t]),e=n?n.text():"",n=l("<button></button");return n.append('<span class="index">'+padNumber(t+1,2)+"<span>"),""!=e&&n.append(' <span class="label">'+e+"<span>"),n.append(' <span class="indicator"><span></span></span>'),n}},a.slick(n))})},i.initTestimonialSliderBlocks=function(){l(".wp-block-crown-blocks-testimonial-slider").each(function(e,t){var n,a=l(".testimonial-slider-testimonials > .inner",t);a.hasClass("slick-initialized")||(n=l('<div class="slick-slider-nav"></div>'),l(".testimonial-slider-testimonials",t).before(n),a.children().wrap("<div></div>"),n={mobileFirst:!0,draggable:!1,dots:!1,arrows:!0,fade:!0,appendArrows:n,adaptiveHeight:!0},a.on("init",function(e,t){var n=t.$slider.closest(".wp-block-crown-blocks-testimonial-slider"),n=l(".slick-slider-nav",n);l(".status",n).remove(),1<t.slideCount&&n.append('<span class="status"><span class="current">'+(t.currentSlide+1)+'</span> <span class="of">of</span> <span class="total">'+t.slideCount+"</span></span>")}).on("beforeChange",function(e,t,n,a){var i=t.$slider.closest(".wp-block-crown-blocks-testimonial-slider"),i=l(".slick-slider-nav",i);l(".status",i).remove(),1<t.slideCount&&i.append('<span class="status"><span class="current">'+(a+1)+'</span> <span class="of">of</span> <span class="total">'+t.slideCount+"</span></span>")}).slick(n))})},i.initContentSliderBlocks=function(){l(".wp-block-crown-blocks-content-slider").each(function(e,t){t=l("> .inner",t);t.hasClass("slick-initialized")||t.slick({mobileFirst:!0,draggable:!0,dots:!0,arrows:!1,fade:!1})})},i.initFeaturedPostSliderBlocks=function(){l(".wp-block-crown-blocks-featured-post-slider").each(function(e,t){t=l(".post-feed > .inner",t);t.hasClass("slick-initialized")||t.slick({mobileFirst:!0,draggable:!0,dots:!1,arrows:!0,fade:!1,slidesToShow:1,slidesToScroll:1,responsive:[{breakpoint:767,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:991,settings:{slidesToShow:3,slidesToScroll:3}}]})})},i.initFeaturedResourceSliderBlocks=function(){l(".wp-block-crown-blocks-featured-resource-slider").each(function(e,t){t=l(".post-feed > .inner",t);t.hasClass("slick-initialized")||t.slick({mobileFirst:!0,draggable:!0,dots:!1,arrows:!0,fade:!1,slidesToShow:1,slidesToScroll:1,responsive:[{breakpoint:767,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:991,settings:{slidesToShow:3,slidesToScroll:3}}]})})},i.initCenterFinderBlocks=function(){l(".wp-block-crown-blocks-center-finder").each(function(e,t){t=l(t);i.initMap(l(".google-map",t)),t.on("click",".locations article.location",function(e){var t=l(this);if(!t.hasClass("active")){var n=l(this).closest(".wp-block-crown-blocks-center-finder");l(".locations article.location.active",n).removeClass("active");var a=t.clone();t.addClass("active"),l(".preview",n).html(a);var i=parseInt(t.data("location-id")),t=l(".map .google-map",n);if(t.hasClass("map-initialized")){var o,s=t.data("map-data");for(o in s.markers)s.markers[o].setIcon(c.markerImages.red);n=s.markers.find(function(e){return e.data.locationId==i});void 0!==n&&n.setIcon(c.markerImages.blue)}else t.on("mapInitialized",function(e){var t,n=l(this).data("map-data");for(t in n.markers)n.markers[t].setIcon(c.markerImages.red);var a=n.markers.find(function(e){return e.data.locationId==i});void 0!==a&&a.setIcon(c.markerImages.blue)})}}),l(".locations article.location:first",t).trigger("click")})},i.initSectionNavBlocks=function(){l(".wp-block-crown-blocks-section-nav").each(function(e,t){var t=l(t),n=l('<nav class="section-nav-nav"><div class="inner"><ul class="menu"></ul></div></nav>');l(".section-nav-contents",t).before(n),l(".section-nav-title",t).length&&l("> .inner",n).prepend("<h2>"+l(".section-nav-title",t).text()+"</h2>"),l(".wp-block-crown-blocks-section-nav-content",t).each(function(e,t){t=l(t),e="Section "+(e+1);l(".section-nav-content-title",t).length&&(e=l(".section-nav-content-title",t).text()),l(".menu",n).append('<li><a href="#">'+e+"</a></li>")})}),l(document).on("click",".wp-block-crown-blocks-section-nav .section-nav-nav .menu a",function(e){e.preventDefault();var t=l(this).closest(".wp-block-crown-blocks-section-nav"),e=l(this).parent().index();0==e?i.smoothScrollToElement(t):(e=l(".section-nav-contents > .inner > .wp-block-crown-blocks-section-nav-content",t).eq(e),t=l(".section-nav-nav",t).outerHeight(),i.smoothScrollToElement(e,1e3,-t))})},i.initBranchMapShortcodes=function(){l(".branch-map > .google-map").each(function(e,t){i.initMap(l(t))})},i.smoothScrollToElement=function(e,t,n){var a;t=void 0!==t?t:1e3,n=void 0!==n?n:0,0<e.length&&(a=parseInt(e.css("margin-top")),i.smoothScrollToPos(e.offset().top-(0<a?a:0),t,n))},i.smoothScrollToPos=function(e,t,n){t=void 0!==t?t:1e3,n=void 0!==n?n:0;var a=600<l("body").width()&&l("#wpadminbar").length?l("#wpadminbar").outerHeight():0;l("html, body").stop(!0).animate({scrollTop:e-a+n},t,"easeOutExpo")},i)}(jQuery);