!function(e){function r(r,t){t.placeholder.append('<div class="outline"></div>'),e(".outline",t.placeholder).height(t.placeholder.height()-2)}function t(r){var t=e(this);t.addClass("button-primary-disabled"),t.next(".spinner").addClass("is-active");var n=e("#sortable-terms-list > ol").nestedSortable("toHierarchy"),i=a(n,0);e.post(crownOrderingAdminTermOrderingData.ajaxUrl,{action:"update_term_order_meta_data",taxonomy:crownOrderingAdminTermOrderingData.taxonomy,updatedTerms:i},function(){t.removeClass("button-primary-disabled"),t.next(".spinner").removeClass("is-active")})}function a(e,r){for(var t=new Array,n=0;n<e.length;n++){var i={term_id:e[n].id,menu_order:n+1,parent:r};t.push(i),e[n].children&&(t=t.concat(a(e[n].children,e[n].id)))}return t}crownOrderingAdminTermOrderingData.isHierarchical;e(document).ready(function(){e("#sortable-terms-list > ol").nestedSortable({items:"li",toleranceElement:"> div.sortable-term",handle:"div.sortable-term",start:r,isTree:!0,expandOnHover:700,startCollapsed:!1}),e("#sortable-terms-list .collapse-toggle").on("click",function(){e(this).closest("li").toggleClass("mjs-nestedSortable-collapsed").toggleClass("mjs-nestedSortable-expanded")}),e(".save-sortable-terms-list").on("click",t)})}(jQuery);