!function(e){function t(t,s){s.placeholder.append('<div class="outline"></div>'),e(".outline",s.placeholder).height(s.placeholder.height()-2)}function s(t){var s=e(this);s.addClass("button-primary-disabled"),s.next(".spinner").addClass("is-active");var o=e("#sortable-posts-list > ol").nestedSortable("toHierarchy"),r=a(o,0);e.post(crownOrderingAdminPostOrderingData.ajaxUrl,{action:"update_post_order_meta_data",updatedPosts:r},function(){s.removeClass("button-primary-disabled"),s.next(".spinner").removeClass("is-active")})}function a(e,t){for(var s=new Array,o=0;o<e.length;o++){var r={ID:e[o].id,menu_order:o+1,post_parent:t};s.push(r),e[o].children&&(s=s.concat(a(e[o].children,e[o].id)))}return s}crownOrderingAdminPostOrderingData.isHierarchical;e(document).ready(function(){e("#sortable-posts-list > ol").nestedSortable({items:"li",toleranceElement:"> div.sortable-post",handle:"div.sortable-post",start:t,isTree:!0,expandOnHover:700,startCollapsed:!1}),e("#sortable-posts-list .collapse-toggle").on("click",function(){e(this).closest("li").toggleClass("mjs-nestedSortable-collapsed").toggleClass("mjs-nestedSortable-expanded")}),e(".save-sortable-posts-list").on("click",s)})}(jQuery);