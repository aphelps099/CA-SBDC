{"version":3,"file":"gp-google-sheets-settings-feed-edit.js","mappings":"mBACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,ICAlF,MAAM,EAA+BI,OAAe,O,aCOXC,EAAYD,OAAM,gCAE3D,IAAEE,UAAUC,OAAM,YAOlB,WAEC,GAAKF,EAAQG,UAAb,CAIA,ICP2C,EAC3CC,EACAC,EACAC,EACAC,EDGIC,EAAWR,EAAQS,iBAKvB,GAJIT,EAAQU,aACXF,EAAW,UAAGA,EAAQ,aAAKR,EAAQU,WAAU,MAG1CV,EAAQW,cAqBX,OApBA,IACC,4EACCC,YAEF,IAAE,yCAAyCC,OAC1C,4DAEIb,EAAQW,cAAa,0FAIRX,EAAQG,UAAS,6BAAqBK,EAAQ,qMAGXR,EAAQc,WAAU,0GASxE,IAAE,yCAAyCD,OAC1C,iJAEgBb,EAAQG,UAAS,6BAAqBK,EAAQ,8LAGNR,EAAQe,gBAAe,2HAC5Bf,EAAQc,WAAU,wFC3C3B,EDgDf,CAC3BV,MAAOJ,EAAQI,MACfC,OAAQL,EAAQgB,QAChBV,OAAQN,EAAQiB,QAChBV,QAASP,EAAQkB,UCnDlBd,EAAK,QACLC,EAAM,SACNC,EAAM,SACNC,EAAO,UAEP,IAAE,oBAAoBY,IAAI,kCAE1B,IAAE,oBAAoBC,GAAG,kCAAkC,SAAUC,GACpE,IAAMC,EAAU,IAAEC,MAClB,IAAID,EAAQE,KAAK,eAAjB,CAIAF,EAAQE,KAAK,eAAe,GAE5B,IAAE,oCAAoCC,SAAS,aAC/C,IAAMD,EAAO,CACZE,OAAQ,uBACRC,YAAavB,EACbY,QAASX,EACTY,QAASX,GAEVsB,OAAOC,KAAKtB,EAASiB,GAAM,SAAUM,GACpCR,EAAQE,KAAK,eAAe,GAC5B,IAAE,4BAA4BO,QAAQD,EAASN,KAAKQ,SAEpD,IAAE,oCAAoCC,YAAY,YACnD,G,CACD,IAMM,SAAyC,G,IAC/C7B,EAAK,QACLC,EAAM,SACNC,EAAM,SACNC,EAAO,UAEP,IAAE,gCAAgCY,IAAI,oCAEtC,IAAE,gCAAgCC,GACjC,oCACA,WAEC,IAAE,+BAA+BK,SAAS,aAC1C,IAAMD,EAAO,CACZE,OAAQ,kBACRC,YAAavB,EACbY,QAASX,EACTY,QAASX,GAEVsB,OAAOC,KAAKtB,EAASiB,GAAM,SAAUM,GAChCA,EAASI,SAEZC,SAASC,SAIV,IAAE,+BAA+BH,YAAY,YAC9C,GACD,GAEF,CDVCI,CAAgC,CAC/BjC,MAAOJ,EAAQI,MACfC,OAAQL,EAAQgB,QAChBV,OAAQN,EAAQiB,QAChBV,QAASP,EAAQkB,U,CAEnB,CAlECoB,EACD,G","sources":["webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///external window \"jQuery\"","webpack:///./js/src/settings-feed-edit.ts","webpack:///./js/src/settings-feed-shared.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"jQuery\"];","import $ from 'jquery';\n\nimport {\n\taddButtonClickHandlerInsert,\n\taddButtonClickHandlerDisconnect,\n} from './settings-feed-shared';\n\nconst { gpgs_settings_feed_edit_strings: strings } = window;\n\n$(document).ready(() => {\n\taddConnectedUI();\n});\n\n/**\n * Adds the \"disconnect button\" and \"insert test row button\" as rendered during feed editing.\n */\nfunction addConnectedUI() {\n\t// if a sheet has been disconected, do not show the \"connected\" UI\n\tif (!strings.sheet_url) {\n\t\treturn;\n\t}\n\n\tlet linkText = strings.spreadsheet_name;\n\tif (strings.sheet_name) {\n\t\tlinkText = `${linkText} (${strings.sheet_name})`;\n\t}\n\n\tif (strings.error_message) {\n\t\t$(\n\t\t\t'#gform_setting_google_sheet_url_field > .gform-settings-input__container'\n\t\t).hide();\n\n\t\t$('#gform_setting_google_sheet_url_field').append(\n\t\t\t`<div>\n\t\t\t\t<p class=\"alert error\">\n\t\t\t\t\t${strings.error_message}\n\t\t\t\t\t</br>\n\t\t\t\t\t</br>\n\t    \t\t\t<span>\n\t    \t\t\t\t<a href=\"${strings.sheet_url}\" target=\"_blank\">${linkText}</a>\n\t    \t\t\t</span>\n\t    \t\t\t<span style=\"align-self: self-end;margin-left: auto !important;vertical-align: middle;\">\n\t    \t\t\t<a id=\"disconnect\" class=\"button add-new-h2\">${strings.disconnect}<span class=\"spinner spinner_disconnect\"></span></a>\n\t    \t\t\t</span>\n\t\t\t\t</p>\n\t\t\t</div>`\n\t\t);\n\n\t\treturn;\n\t}\n\n\t$('#gform_setting_google_sheet_url_field').append(\n\t\t`<div class=\"alert gforms_note_success\" style=\"display: flex;align-items: center;margin-bottom:0;\">\n\t    \t<span>\n\t    \t\t<a href=\"${strings.sheet_url}\" target=\"_blank\">${linkText}</a>\n\t    \t</span>\n\t    \t<span style=\"align-self: self-end;margin-left: auto !important;vertical-align: middle;\">\n\t    \t<a id=\"insert_test_row\" class=\"button add-new-h2\">${strings.insert_test_row}<span class=\"spinner spinner_insert_test_row\"></span></a>\n\t    \t<a id=\"disconnect\" class=\"button add-new-h2\">${strings.disconnect}<span class=\"spinner spinner_disconnect\"></span></a>\n\t    \t</span>\n\t    </div>`\n\t);\n\n\taddButtonClickHandlerInsert({\n\t\tnonce: strings.nonce,\n\t\tformId: strings.form_id,\n\t\tfeedId: strings.feed_id,\n\t\tajaxUrl: strings.ajax_url,\n\t});\n\n\taddButtonClickHandlerDisconnect({\n\t\tnonce: strings.nonce,\n\t\tformId: strings.form_id,\n\t\tfeedId: strings.feed_id,\n\t\tajaxUrl: strings.ajax_url,\n\t});\n}\n","/**\n * Shared functions for use within the feed settings context.\n */\nimport $ from 'jquery';\n\ninterface ClickHandlerArgs {\n\tnonce: string;\n\tformId: string;\n\tfeedId: string;\n\tajaxUrl: string;\n}\n\n/**\n * Adds \"insert test row\" event handler\n */\nexport function addButtonClickHandlerInsert({\n\tnonce,\n\tformId,\n\tfeedId,\n\tajaxUrl,\n}: ClickHandlerArgs) {\n\t$('#insert_test_row').off('click.gpgsInsertTestRowHandler');\n\n\t$('#insert_test_row').on('click.gpgsInsertTestRowHandler', function (eee) {\n\t\tconst $button = $(this);\n\t\tif ($button.data('isInserting')) {\n\t\t\treturn;\n\t\t}\n\n\t\t$button.data('isInserting', true);\n\t\t// show spinner\n\t\t$('.spinner.spinner_insert_test_row').addClass('is-active');\n\t\tconst data = {\n\t\t\taction: 'gpgs_insert_test_row',\n\t\t\t_ajax_nonce: nonce,\n\t\t\tform_id: formId,\n\t\t\tfeed_id: feedId,\n\t\t};\n\t\tjQuery.post(ajaxUrl, data, function (response) {\n\t\t\t$button.data('isInserting', false);\n\t\t\t$('.gform-settings__content').prepend(response.data.message);\n\t\t\t// hide spinner\n\t\t\t$('.spinner.spinner_insert_test_row').removeClass('is-active');\n\t\t});\n\t});\n}\n\n/**\n * Adds \"disconnected sheet\" event handler\n */\nexport function addButtonClickHandlerDisconnect({\n\tnonce,\n\tformId,\n\tfeedId,\n\tajaxUrl,\n}: ClickHandlerArgs) {\n\t$('#feed_disconnect,#disconnect').off('click.gpgsDisconnectSheetHandler');\n\n\t$('#feed_disconnect,#disconnect').on(\n\t\t'click.gpgsDisconnectSheetHandler',\n\t\tfunction () {\n\t\t\t// show spinner\n\t\t\t$('.spinner.spinner_disconnect').addClass('is-active');\n\t\t\tconst data = {\n\t\t\t\taction: 'gpgs_disconnect',\n\t\t\t\t_ajax_nonce: nonce,\n\t\t\t\tform_id: formId,\n\t\t\t\tfeed_id: feedId,\n\t\t\t};\n\t\t\tjQuery.post(ajaxUrl, data, function (response) {\n\t\t\t\tif (response.success) {\n\t\t\t\t\t// Refresh the page so the user can connect a new sheet.\n\t\t\t\t\tlocation.reload();\n\t\t\t\t}\n\n\t\t\t\t// hide spinner\n\t\t\t\t$('.spinner.spinner_disconnect').removeClass('is-active');\n\t\t\t});\n\t\t}\n\t);\n}\n\nfunction disableSettingsSection(selector: string) {\n\t$(selector)\n\t\t.addClass('gpgs-disabled-settings-section')\n\t\t.attr('inert', 'true');\n}\n\nfunction enableSettingsSection(selector: string) {\n\t$(selector)\n\t\t.removeClass('gpgs-disabled-settings-section')\n\t\t.removeAttr('inert');\n}\n\nexport function disableSheetSettingsSection() {\n\tdisableSettingsSection('#gform-settings-section-google-sheets-settings');\n}\n\nexport function enableSheetSettingsSection() {\n\tenableSettingsSection('#gform-settings-section-google-sheets-settings');\n}\n\nexport function disableColumnMappingSection() {\n\tdisableSettingsSection('#gform-settings-section-column-mapping');\n}\n\nexport function enableColumnMappingSection() {\n\tenableSettingsSection('#gform-settings-section-column-mapping');\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","window","strings","document","ready","sheet_url","nonce","formId","feedId","ajaxUrl","linkText","spreadsheet_name","sheet_name","error_message","hide","append","disconnect","insert_test_row","form_id","feed_id","ajax_url","off","on","eee","$button","this","data","addClass","action","_ajax_nonce","jQuery","post","response","prepend","message","removeClass","success","location","reload","addButtonClickHandlerDisconnect","addConnectedUI"],"sourceRoot":""}