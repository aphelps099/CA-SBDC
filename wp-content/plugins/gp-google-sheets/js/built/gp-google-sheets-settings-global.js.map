{"version":3,"file":"gp-google-sheets-settings-global.js","mappings":"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","sources":["webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///external window \"jQuery\"","webpack:///./js/src/constants.ts","webpack:///./js/src/helpers.ts","webpack:///./js/src/settings-global.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"jQuery\"];","export const GOOGLE_TOKEN_KEY = 'gpgs_google_oauth_data';\nexport const GOOGLE_PICKER_DATA_KEY = 'gpgs_google_picker_data';\n","import $ from 'jquery';\n// eslint-disable-next-line import/no-unresolved\nimport { Token } from './typings/global';\nimport { GOOGLE_PICKER_DATA_KEY } from './constants';\n// eslint-disable-next-line prettier/prettier\nimport type {\n\tOAuthResponseData,\n\tGPGSPluginSettingsStrings,\n\tGPGSFeedSettingsStrings,\n} from './typings/global';\n\n/**\n * Polls local storage for a specific item.\n *\n * @param {Object}   params\n * @param {number}   params.ms         The number of milliseconds to wait between polls.\n * @param {string}   params.itemKey    The key of the item to poll for.\n * @param {Function} params.handleItem The function to call when the item is found.\n */\nexport function pollLocalStorage({\n\tms = 1000,\n\titemKey,\n\thandleItem,\n}: {\n\tms?: number;\n\titemKey: string;\n\thandleItem: (item: string) => void;\n}) {\n\tconst interval = setInterval(() => {\n\t\tconst item = localStorage.getItem(itemKey);\n\n\t\tif (item) {\n\t\t\tclearInterval(interval);\n\t\t\thandleItem(item);\n\t\t}\n\t}, ms);\n}\n\n/**\n * Helper to create a form with given inputs on the fly and post it in a new tab.\n */\nexport function submitOAuthForm({\n\toAuthServiceUrl,\n\tinputs,\n\tid = 'gpgs_oauth_form',\n}: {\n\toAuthServiceUrl: string;\n\tinputs: [string, string][];\n\tid?: string;\n}) {\n\t$(\n\t\t`<form\n\t\t\tid=\"${id}\"\n\t\t\taction=\"${oAuthServiceUrl}\"\n\t\t\tmethod=\"POST\"\n\t\t\ttarget=\"tab\"\n\t\t>\n\t\t\t${inputs.map(([name, value]) => {\n\t\t\t\tconst escapedValue = value.replace(/\"/g, '&quot;');\n\t\t\t\treturn `<input type=\"hidden\" name=\"${name}\" value=\"${escapedValue}\">`;\n\t\t\t})}\n\t\t</form>`\n\t)\n\t\t.appendTo('body')\n\t\t.submit();\n}\n\n/**\n * Helper to load the Google Picker.\n *\n * @param opts\n * @param opts.token\n * @param opts.showErrorMessage\n * @param opts.onDataFound\n * @param opts.strings\n */\nexport function showPicker({\n\ttoken,\n\tshowErrorMessage,\n\tonDataFound,\n\tstrings,\n}: {\n\ttoken: Token;\n\tshowErrorMessage: (message: string) => void;\n\tonDataFound: (data: OAuthResponseData) => void;\n\tstrings: GPGSPluginSettingsStrings | GPGSFeedSettingsStrings;\n}) {\n\tconst state = {\n\t\toauth_random_string: strings.oauth_random_string,\n\t\toauth_validation_token: strings.oauth_validation_token,\n\t\tuser_id: strings.user_id,\n\t};\n\n\tsubmitOAuthForm({\n\t\toAuthServiceUrl: `${strings.gwiz_oauth_service_url}/google/file-picker`,\n\t\tinputs: [\n\t\t\t['postUrl', `${strings.ajax_url}?action=gpgs_picker_callback`],\n\t\t\t['accessToken', token.access_token],\n\t\t\t['state', JSON.stringify(state)],\n\t\t],\n\t\tid: 'gpgs-google-sheet-picker',\n\t});\n\n\tconst pickerDataLocalStorageKey = `${GOOGLE_PICKER_DATA_KEY}_${strings.oauth_random_string}`;\n\t/**\n\t * Start checking local storage for the Google Sheet URL.\n\t * This way we know when the user has picked a sheet in the opened picker\n\t * tab.\n\t */\n\tpollLocalStorage({\n\t\titemKey: pickerDataLocalStorageKey,\n\t\thandleItem: (item) => {\n\t\t\tlocalStorage.removeItem(pickerDataLocalStorageKey);\n\n\t\t\tconst data: OAuthResponseData = JSON.parse(item);\n\n\t\t\tif (data.success === '0' || !data.sheet_url) {\n\t\t\t\tshowErrorMessage(\n\t\t\t\t\tdata.message || strings.error_picking_spreadsheet\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tonDataFound(data);\n\t\t},\n\t});\n}\n","import $ from 'jquery';\nimport { pollLocalStorage, showPicker, submitOAuthForm } from './helpers';\n// eslint-disable-next-line import/no-unresolved\nimport { Token } from './typings/global';\nimport { GOOGLE_TOKEN_KEY } from './constants';\n\nconst { gpgs_settings_plugin_strings: strings } = window;\n\ninterface TokenHealthResponse {\n\tsuccess: boolean;\n\tdata: {\n\t\ttoken_data: Array<{\n\t\t\ttokenIsHealthy: boolean;\n\t\t\tgoogleEmail: string;\n\t\t\tuserId: number;\n\t\t\tuserDisplayName: string;\n\t\t\tuserEditLink: string;\n\t\t\tbelongsToCurrentUser: string;\n\t\t\tconnectedFeeds: Array<{\n\t\t\t\tfeed_id: number;\n\t\t\t\tspreadsheet_id: string;\n\t\t\t\tform_title: string;\n\t\t\t\tfeed_name: string;\n\t\t\t\tform_id: number;\n\t\t\t\tfeed_url: string;\n\t\t\t}>;\n\t\t\tlegacyToken: boolean;\n\t\t}>;\n\t};\n}\n\ninterface GPPASpreadsheetResponse {\n\tsuccess: boolean;\n\tdata: {\n\t\tmarkup: string;\n\t};\n}\n\n/**\n * Adds the \"connect button\" as rendered during feed creation\n */\nfunction addConnectButton() {\n\t$('#gpgs_connect_to_google_button').remove();\n\n\t$('#gform_setting_connect_button').append(\n\t\t`<div id=\"gpgs_connect_to_google_button\" class=\"\">\n\t\t\t<button onclick=\"return false;\" class=\"gform_settings_button button\" id=\"plugin_connect\">\n\t\t\t\t${strings.connect}\n\t\t\t\t<span class=\"spinner spinner_connect\"></span>\n\t\t\t</button>\n\t\t</div>`\n\t);\n\n\taddButtonClickHandlerPluginConnect();\n}\n\n/**\n * Adds the \"connect button\" as rendered during feed deletion\n */\nfunction addDisconnectButton() {\n\t$('#gpgs_connect_to_google_button').remove();\n\n\tconst connectedAsText = strings.connected_to_google;\n\n\tconst legacyTokenWarning = strings.token_is_legacy\n\t\t? `<span id=\"gpgs_connect_to_google_legacy_warning\">${WARNING} ${strings.legacy_token}</span>`\n\t\t: '';\n\n\tconst markup = `<div id=\"gpgs_connect_to_google_button\" class=\"alert gforms_note_success\" style=\"\n\t    display: flex;\n\t    align-items: center;\n\t\">\n\t\t<span id=\"gpgs_connected_to_google\">${connectedAsText}</span>\n\t\t${legacyTokenWarning}\n\t\t<button onclick=\"return false;\" class=\"gform_settings_button button\" id=\"plugin_disconnect\" style=\"\n\t\t    align-self: self-end;\n\t\t\">\n\t\t\t${strings.disconnect}\n\t\t\t<span class=\"spinner spinner_connect\"></span>\n\t\t</button>\n\t</div>`;\n\n\t$('#gform_setting_connect_button').append(markup);\n\n\taddButtonClickHandlerPluginDisconnect();\n}\n\nfunction addButtonClickHandlerPluginConnect() {\n\tremoveButtonClickHandlerPluginConnect();\n\tremoveButtonClickHandlerPluginDisconnect();\n\n\t$('#plugin_connect').on('click.gpgsConnectButton', function () {\n\t\t// add loading spinner\n\t\t$('.spinner.spinner_connect').addClass('is-active');\n\n\t\tconst state = {\n\t\t\toauth_random_string: strings.oauth_random_string,\n\t\t\toauth_validation_token: strings.oauth_validation_token,\n\t\t\tuser_id: strings.user_id,\n\t\t};\n\n\t\tsubmitOAuthForm({\n\t\t\toAuthServiceUrl: `${strings.gwiz_oauth_service_url}/oauth/google`,\n\t\t\tinputs: [\n\t\t\t\t[\n\t\t\t\t\t'redirectUrl',\n\t\t\t\t\t`${strings.ajax_url}?action=gpgs_plugin_settings_oauth_callback`,\n\t\t\t\t],\n\t\t\t\t['licenseId', strings.gravity_perks_license_id],\n\t\t\t\t['licenseHash', strings.gravity_perks_license_hash],\n\t\t\t\t['perkId', strings.slug],\n\t\t\t\t['siteUrl', strings.site_url],\n\t\t\t\t['state', JSON.stringify(state)],\n\t\t\t],\n\t\t});\n\n\t\tconst localStorageKey = `${GOOGLE_TOKEN_KEY}_${strings.oauth_random_string}`;\n\n\t\tpollLocalStorage({\n\t\t\titemKey: localStorageKey,\n\t\t\thandleItem: (item) => {\n\t\t\t\t// remove the item so that it's existence doesn't interfere with future polling.\n\t\t\t\tlocalStorage.removeItem(localStorageKey);\n\n\t\t\t\tconst data = JSON.parse(item);\n\n\t\t\t\tif (data.success === '0') {\n\t\t\t\t\t$('#plugin_connect > span').removeClass('is-active');\n\n\t\t\t\t\taddErrorMessage(data.message);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tstrings.token = data.token;\n\n\t\t\t\t// this must come before changing the \"id\" prop for the button or it will not remove the event handler from the button.\n\t\t\t\tremoveButtonClickHandlerPluginConnect();\n\n\t\t\t\t$('#plugin_connect > span')\n\t\t\t\t\t.removeClass('spinner_connect')\n\t\t\t\t\t.addClass('spinner_disconnect');\n\n\t\t\t\tstrings.token_is_legacy = '';\n\n\t\t\t\taddDisconnectButton();\n\n\t\t\t\trenderTokenHealth();\n\n\t\t\t\trenderGPPASection();\n\t\t\t},\n\t\t});\n\t});\n}\n\nfunction addErrorMessage(message: string) {\n\t$('#gf-admin-notices-wrapper').append(\n\t\t`<div class=\"notice notice-error gf-notice\"><p><strong>${strings.error_authenticating_with_google} ${message}</strong></p></div>`\n\t);\n}\n\nfunction addSuccessMessage(message: string) {\n\t$('#gf-admin-notices-wrapper').append(\n\t\t`<div class=\"notice notice-success gf-notice\"><p><strong>${message}</strong></p></div>`\n\t);\n}\n\nfunction addButtonClickHandlerPluginDisconnect() {\n\tremoveButtonClickHandlerPluginConnect();\n\tremoveButtonClickHandlerPluginDisconnect();\n\n\t// handler for the Disconnect button\n\t$('#plugin_disconnect').on('click.gpgsDisconnectButton', function () {\n\t\tif (\n\t\t\t// eslint-disable-next-line no-alert\n\t\t\t!confirm(\n\t\t\t\t'Are you sure you want to disconnect? Doing so might unintentionally break existing feeds.'\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// show spinner\n\t\t$('.spinner.spinner_disconnect').addClass('is-active');\n\n\t\tconst data = {\n\t\t\taction: 'gpgs_disconnect_plugin',\n\t\t\t_ajax_nonce: strings.nonce,\n\t\t};\n\n\t\tjQuery.post(strings.ajax_url, data, function (response) {\n\t\t\tif (response.success) {\n\t\t\t\t// hide disconnect button, nothing to disconnect\n\t\t\t\t$(\n\t\t\t\t\t'#plugin_disconnect,.tooltip_google_sheet_disconnect'\n\t\t\t\t).remove();\n\n\t\t\t\taddConnectButton();\n\n\t\t\t\t// Remove success feedback from Client ID and Client Secret\n\t\t\t\t$(\n\t\t\t\t\t'#gform_setting_client_id .gform-settings-input__container'\n\t\t\t\t).removeClass(\n\t\t\t\t\t'gform-settings-input__container--feedback-success'\n\t\t\t\t);\n\t\t\t\t$(\n\t\t\t\t\t'#gform_setting_client_secret .gform-settings-input__container'\n\t\t\t\t).removeClass(\n\t\t\t\t\t'gform-settings-input__container--feedback-success'\n\t\t\t\t);\n\n\t\t\t\trenderTokenHealth();\n\n\t\t\t\trenderGPPASection();\n\t\t\t}\n\t\t\t// hide spinner\n\t\t\t$('.spinner.spinner_disconnect').removeClass('is-active');\n\t\t});\n\t});\n}\n\nfunction removeButtonClickHandlerPluginConnect() {\n\t$('#plugin_connect').off('click.gpgsConnectButton');\n}\n\nfunction removeButtonClickHandlerPluginDisconnect() {\n\t$('#plugin_disconnect').off('click.gpgsDisconnectButton');\n}\n\nfunction checkForOAuthMessage() {\n\tconst u = new URL(window.location.href);\n\tconst p = new URLSearchParams(u.search);\n\n\tconst message = p.get('gwiz_oauth_message');\n\n\tif (!message) {\n\t\treturn;\n\t}\n\n\tconst success = p.get('gwiz_oauth_success');\n\n\tconst alertClassList = ['alert'];\n\n\tif (success) {\n\t\talertClassList.push('gforms_note_success');\n\t} else {\n\t\talertClassList.push('gforms_note_error');\n\t}\n\n\t$('.gform-settings__content').prepend(\n\t\t// @ts-ignore\n\t\t`<div class=\"${alertClassList.join(\n\t\t\t' '\n\t\t)}\" role=\"alert\">${strings.failed_to_connect_with_error_message\n\t\t\t.replace('%1$s', strings.plugin_title)\n\t\t\t.replace('%2$s', message)}</div>`\n\t);\n}\n\nfunction disableConnectButtonDueToMissingLicense() {\n\t$('#plugin_connect').prop('disabled', true);\n\t$('#plugin_connect').after(\n\t\t`<p style=\"align-self: center;margin: 0 0 0 1rem;\">${strings.connecting_requires_valid_license}</p>`\n\t);\n\n\t$('#gpgs_connect_to_google_button').css('display', 'flex');\n}\n\nfunction createIcon(url: string, text: string = '') {\n\treturn `<span class=\"gpgs_status_icon\" style=\"background-image: url('${url}');\">${text}</span>`;\n}\n\nconst TOKEN_HEALTHY = createIcon(\n\t`${strings.site_url}/wp-content/plugins/gp-google-sheets/assets/green-checkmark.svg`,\n\t'Connected'\n);\n\nconst TOKEN_UNHEALTHY = createIcon(\n\t`${strings.site_url}/wp-content/plugins/gp-google-sheets/assets/red-x.svg`,\n\t'Disconnected'\n);\n\nconst WARNING = createIcon(\n\t`${strings.site_url}/wp-content/plugins/gp-google-sheets/assets/warning.svg`,\n\t'Warning'\n);\n\nasync function renderGPPASection() {\n\t$('#gp-google-sheets-add-spreadsheet').off('.gpgsGppaSection');\n\n\tif (!strings.token) {\n\t\t$(\n\t\t\t'#gform-settings-section-populate-anything-integration > .gform-settings-panel__content'\n\t\t)\n\t\t\t.children()\n\t\t\t.remove();\n\n\t\t$(\n\t\t\t'#gform-settings-section-populate-anything-integration > .gform-settings-panel__content'\n\t\t).append(\n\t\t\t`<div class=\"gpgs_token_health_error\">\n\t\t\t\t<p>${strings.gppa_section_no_global_token}</p>\n\t\t\t</div>`\n\t\t);\n\n\t\treturn;\n\t}\n\n\tconst data = {\n\t\taction: 'gpgs_get_spreadsheets_markup',\n\t\t_ajax_nonce: strings.nonce,\n\t};\n\n\tconst resp: GPPASpreadsheetResponse = await jQuery.get(\n\t\tstrings.ajax_url,\n\t\tdata\n\t);\n\n\t$('#gform-settings-section-populate-anything-integration').show();\n\n\tif (!resp.success || !resp.data.markup) {\n\t\t$(\n\t\t\t'#gform-settings-section-populate-anything-integration > .gform-settings-panel__content'\n\t\t)\n\t\t\t.children()\n\t\t\t.remove();\n\n\t\t$(\n\t\t\t'#gform-settings-section-populate-anything-integration > .gform-settings-panel__content'\n\t\t).append(\n\t\t\t`<div class=\"gpgs_token_health_error\">\n\t\t\t\t<p>${strings.gppa_section_error_fetching}</p>\n\t\t\t</div>`\n\t\t);\n\n\t\treturn;\n\t}\n\n\t$(\n\t\t'#gform-settings-section-populate-anything-integration > .gform-settings-panel__content'\n\t)\n\t\t.children()\n\t\t.remove();\n\n\t$(\n\t\t'#gform-settings-section-populate-anything-integration > .gform-settings-panel__content'\n\t).append(resp.data.markup);\n\n\twindow.gform_initialize_tooltips();\n\n\t$('#gp-google-sheets-add-spreadsheet').on(\n\t\t'click.gpgsGppaSection',\n\t\t(event) => {\n\t\t\tevent.preventDefault();\n\n\t\t\tshowPicker({\n\t\t\t\ttoken: strings.token as unknown as Token,\n\t\t\t\tshowErrorMessage: addErrorMessage,\n\t\t\t\tonDataFound: () => {\n\t\t\t\t\t// Refresh the page to show the new sheet.\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t},\n\t\t\t\tstrings,\n\t\t\t});\n\t\t}\n\t);\n}\n\nasync function renderTokenHealth() {\n\tconst data = {\n\t\taction: 'gpgs_token_health',\n\t\t_ajax_nonce: strings.nonce,\n\t};\n\n\tconst resp: TokenHealthResponse = await jQuery.get(strings.ajax_url, data);\n\n\tif (!resp.success) {\n\t\t$('#gform_setting_token_health_placeholder').children().remove();\n\n\t\t$('#gform_setting_token_health_placeholder').append(\n\t\t\t`<div class=\"gpgs_token_health_error\">\n\t\t\t\t<p>${strings.token_health_error_fetching}</p>\n\t\t\t</div>`\n\t\t);\n\n\t\treturn;\n\t}\n\n\tif (resp.data.token_data.length === 0) {\n\t\t$('#gform_setting_token_health_placeholder').children().remove();\n\n\t\t$('#gform_setting_token_health_placeholder').append(\n\t\t\t`<div class=\"gpgs_token_health_error\">\n\t\t\t\t<p>${strings.no_connected_tokens}</p>\n\t\t\t</div>`\n\t\t);\n\n\t\treturn;\n\t}\n\n\tresp.data.token_data.sort((a, b) => {\n\t\tif (a.userDisplayName === null) {\n\t\t\treturn 1;\n\t\t}\n\n\t\tif (b.userDisplayName === null) {\n\t\t\treturn -1;\n\t\t}\n\n\t\treturn 0;\n\t});\n\n\twindow.gpgsToggleTokenFeeds = function (el) {\n\t\tconst $el = $(el);\n\t\tconst $tr = $el.closest('tr');\n\n\t\t$tr.toggleClass('gpgs-token-feeds-visible');\n\n\t\tif ($tr.hasClass('gpgs-token-feeds-visible')) {\n\t\t\t$el.text('Hide Feeds');\n\t\t} else {\n\t\t\t$el.text('Show Feeds');\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tconst table =\n\t\t/*html*/\n\t\t`\n\t\t<table class=\"gform-table gform-table--responsive gform-table--no-outer-border gform-table--license-ui\">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t  <th scope=\"user_display_name\">User</th>\n\t\t\t\t  <th scope=\"email\">Google Account Email</th>\n\t\t\t\t  <th scope=\"connected_feeds\">Connected Feeds</th>\n\t\t\t\t  <th scope=\"is_healthy\" class=\"gpgs_token_health_status\">Status</th>\n\t\t\t\t  <th scope=\"reconnect\"></th>\n\t\t\t\t</tr>\n\t  \t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t${resp.data.token_data\n\t\t\t\t\t.map(\n\t\t\t\t\t\t({\n\t\t\t\t\t\t\ttokenIsHealthy,\n\t\t\t\t\t\t\tgoogleEmail,\n\t\t\t\t\t\t\tconnectedFeeds,\n\t\t\t\t\t\t\tuserDisplayName,\n\t\t\t\t\t\t\tuserEditLink,\n\t\t\t\t\t\t\tbelongsToCurrentUser,\n\t\t\t\t\t\t\tlegacyToken,\n\t\t\t\t\t\t}) => {\n\t\t\t\t\t\t\tlet tokenHealthText = TOKEN_HEALTHY;\n\t\t\t\t\t\t\tlet reconnectButton = '';\n\n\t\t\t\t\t\t\tlet classes = '';\n\n\t\t\t\t\t\t\tif (legacyToken) {\n\t\t\t\t\t\t\t\treconnectButton = `${WARNING} ${strings.legacy_token}`;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!tokenIsHealthy) {\n\t\t\t\t\t\t\t\ttokenHealthText = TOKEN_UNHEALTHY;\n\n\t\t\t\t\t\t\t\tif (belongsToCurrentUser) {\n\t\t\t\t\t\t\t\t\treconnectButton = /*html*/ `<button id=\"gpgs_reconnect_token\" class=\"button button-secondary\" onclick=\"return false;\">Reconnect</button>`;\n\t\t\t\t\t\t\t\t\tclasses =\n\t\t\t\t\t\t\t\t\t\t'gpgs_unhealthy_token_reconnect_row';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet userCol = `<td scope=\"row\" class=\"gpgs_token_health_user_display_name\"><a href=\"${userEditLink}\">${userDisplayName}</a></td>`;\n\n\t\t\t\t\t\t\tif (userDisplayName === null) {\n\t\t\t\t\t\t\t\tuserCol =\n\t\t\t\t\t\t\t\t\t'<td scope=\"row\" class=\"gpgs_token_health_user_display_name\">–</td>';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t/*html*/\n\t\t\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<tr class=${classes}>\n\t\t\t\t\t\t\t\t${userCol}\n    \t\t\t\t\t\t\t<td scope=\"row\" class=\"gpgs_token_health_google_email\">${\n\t\t\t\t\t\t\t\t\tgoogleEmail || ''\n\t\t\t\t\t\t\t\t}</td>\n    \t\t\t\t\t\t\t<td scope=\"row\" class=\"gpgs_token_health_connected_feeds\">\n\t\t\t\t\t\t\t\t\t${\n\t\t\t\t\t\t\t\t\t\tconnectedFeeds?.length\n\t\t\t\t\t\t\t\t\t\t\t? `<a class=\"gpgs_token_toggle_feeds\" onClick=\"gpgsToggleTokenFeeds(this);event.preventDefault();\" href=\"#\">Show Feeds</a> (${connectedFeeds.length})`\n\t\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td scope=\"row\" class=\"gpgs_token_health_status\">${tokenHealthText}</td>\n\t\t\t\t\t\t\t\t<td scope=\"row\" class=\"gpgs_token_health_reconnect_button\">${reconnectButton}</td>\n    \t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr class=\"gpgs-token-feeds gpgs_border_top\">\n\t\t\t\t\t\t\t\t<td colspan=\"5\" class=\"gpgs_light_grey_background\">\n\t\t\t\t\t\t\t\t\t<table class=\"gform-table gform-table--responsive gform-table--no-outer-border gform-table--license-ui gpgs_light_grey_background gpgs_token_connected_feed_table\">\n\t\t\t\t\t\t\t\t\t\t<thead class=\"gpgs_border_bottom\">\n\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<th>Form</th>\n\t\t\t\t\t\t\t\t\t\t\t\t<th>Feed</th>\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t${connectedFeeds\n\t\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t({\n\t\t\t\t\t\t\t\t\t\t\t\t\tform_title: formTitle,\n\t\t\t\t\t\t\t\t\t\t\t\t\tfeed_name: feedName,\n\t\t\t\t\t\t\t\t\t\t\t\t}) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tformTitle && feedName\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.map(\n\t\t\t\t\t\t\t\t\t\t\t\t({\n\t\t\t\t\t\t\t\t\t\t\t\t\tform_title: formTitle,\n\t\t\t\t\t\t\t\t\t\t\t\t\tfeed_name: feedName,\n\t\t\t\t\t\t\t\t\t\t\t\t\tfeed_url: feedUrl,\n\t\t\t\t\t\t\t\t\t\t\t\t\tform_id: formId,\n\t\t\t\t\t\t\t\t\t\t\t\t}) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t/*html*/\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn `\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class=\"gpgs_token_connected_feed_list_row\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td><a href=\"${strings.admin_url}?page=gf_edit_forms&id=${formId}\" target=\"_blank\" rel=”noopener” rel=”noreferrer”>${formTitle}</a></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td><a href=\"${feedUrl}\" target=\"_blank\" rel=”noopener” rel=”noreferrer”>${feedName}</a></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.join('')}\n\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t`;\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t\t.join('')}\n  \t\t\t</tbody>\n\t\t</table>\n\t`;\n\n\t$('#gform_setting_token_health_placeholder').children().remove();\n\n\t$('#gform_setting_token_health_placeholder').append(table);\n\n\ttokenHealthReconnectEventHandler();\n}\n\nfunction tokenHealthReconnectEventHandler() {\n\t$('#gpgs_reconnect_token').off('click.gpgsReconnectButton');\n\n\t$('#gpgs_reconnect_token').on('click.gpgsReconnectButton', () => {\n\t\tconst state = {\n\t\t\t// namepsace the random string with the user id so that it is unique per user and doesn't conflict with the global one.\n\t\t\toauth_random_string: `${strings.oauth_random_string}_${strings.user_id}`,\n\t\t\toauth_validation_token: strings.oauth_validation_token,\n\t\t\tuser_id: strings.user_id,\n\t\t};\n\n\t\tsubmitOAuthForm({\n\t\t\toAuthServiceUrl: `${strings.gwiz_oauth_service_url}/oauth/google`,\n\t\t\tinputs: [\n\t\t\t\t[\n\t\t\t\t\t'redirectUrl',\n\t\t\t\t\t`${strings.ajax_url}?action=gpgs_plugin_settings_reconnect_oauth_callback`,\n\t\t\t\t],\n\t\t\t\t['licenseId', strings.gravity_perks_license_id],\n\t\t\t\t['licenseHash', strings.gravity_perks_license_hash],\n\t\t\t\t['perkId', strings.slug],\n\t\t\t\t['siteUrl', strings.site_url],\n\t\t\t\t['state', JSON.stringify(state)],\n\t\t\t],\n\t\t});\n\n\t\tconst localStorageKey = `${GOOGLE_TOKEN_KEY}_${strings.oauth_random_string}_${strings.user_id}`;\n\n\t\tpollLocalStorage({\n\t\t\titemKey: localStorageKey,\n\t\t\thandleItem: (item) => {\n\t\t\t\t// remove the item so that it's existence doesn't interfere with future polling.\n\t\t\t\tlocalStorage.removeItem(localStorageKey);\n\n\t\t\t\tconst data = JSON.parse(item);\n\n\t\t\t\tif (data.success === '0') {\n\t\t\t\t\taddErrorMessage(data.message);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst $reconnectedRow = $(\n\t\t\t\t\t'.gpgs_unhealthy_token_reconnect_row'\n\t\t\t\t);\n\t\t\t\t$reconnectedRow\n\t\t\t\t\t.find('.gpgs_token_health_status')\n\t\t\t\t\t.text(TOKEN_HEALTHY);\n\t\t\t\t$reconnectedRow\n\t\t\t\t\t.find('.gpgs_token_health_reconnect_button')\n\t\t\t\t\t.children()\n\t\t\t\t\t.remove();\n\n\t\t\t\taddSuccessMessage('Successfully reconnected to Google Sheets!');\n\t\t\t},\n\t\t});\n\t});\n}\n\nfunction registerHandlers() {\n\t$(document).ready(function () {\n\t\t/**\n\t\t * if no token or license key, disable the connect button\n\t\t * leave it enabled in the case that there is a token but no license key\n\t\t * so that users can still disconnect as this should not require a valid license key.\n\t\t */\n\t\tif (!strings.token) {\n\t\t\taddConnectButton();\n\n\t\t\tif (!strings.gravity_perks_license_id) {\n\t\t\t\tdisableConnectButtonDueToMissingLicense();\n\t\t\t}\n\t\t} else {\n\t\t\taddDisconnectButton();\n\t\t}\n\n\t\tcheckForOAuthMessage();\n\n\t\trenderTokenHealth();\n\t\trenderGPPASection();\n\t});\n}\n\nregisterHandlers();\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","window","GOOGLE_TOKEN_KEY","GOOGLE_PICKER_DATA_KEY","pollLocalStorage","ms","itemKey","handleItem","interval","setInterval","item","localStorage","getItem","clearInterval","submitOAuthForm","oAuthServiceUrl","inputs","id","map","name","escapedValue","replace","appendTo","submit","strings","addConnectButton","remove","append","connect","removeButtonClickHandlerPluginConnect","removeButtonClickHandlerPluginDisconnect","on","addClass","state","oauth_random_string","oauth_validation_token","user_id","gwiz_oauth_service_url","ajax_url","gravity_perks_license_id","gravity_perks_license_hash","slug","site_url","JSON","stringify","localStorageKey","removeItem","data","parse","success","removeClass","addErrorMessage","message","token","token_is_legacy","addDisconnectButton","renderTokenHealth","renderGPPASection","connectedAsText","connected_to_google","legacyTokenWarning","WARNING","legacy_token","markup","disconnect","confirm","action","_ajax_nonce","nonce","jQuery","post","response","error_authenticating_with_google","off","createIcon","url","text","TOKEN_HEALTHY","TOKEN_UNHEALTHY","children","gppa_section_no_global_token","resp","show","gform_initialize_tooltips","event","preventDefault","showErrorMessage","onDataFound","access_token","pickerDataLocalStorageKey","sheet_url","error_picking_spreadsheet","showPicker","location","reload","gppa_section_error_fetching","token_data","length","no_connected_tokens","sort","b","userDisplayName","gpgsToggleTokenFeeds","el","$el","$tr","closest","toggleClass","hasClass","table","tokenIsHealthy","googleEmail","connectedFeeds","userEditLink","belongsToCurrentUser","legacyToken","tokenHealthText","reconnectButton","classes","userCol","filter","formTitle","feedName","feedUrl","formId","admin_url","join","$reconnectedRow","find","token_health_error_fetching","document","ready","after","connecting_requires_valid_license","css","u","URL","href","p","URLSearchParams","search","alertClassList","push","prepend","failed_to_connect_with_error_message","plugin_title","checkForOAuthMessage"],"sourceRoot":""}